(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{3327:function(e,a,s){Promise.resolve().then(s.bind(s,6314))},9504:function(e,a,s){"use strict";var r=s(7437),t=s(2265),n=s(3145),l=s(1268),c=s(5217),i=s(3315),o=s(7727),d=s.n(o);a.Z=e=>{let{imageSrc:a,largeImageSrc:s,altText:o,cardName:u,series:h,averageSellPrice:m,setName:_,marketUrl:g}=e,[v,p]=(0,t.useState)(!1),[x,f]=(0,t.useState)(!0),j=()=>{p(!1)};return(0,r.jsxs)("div",{className:d().card,children:[(0,r.jsx)("div",{className:d().imageWrapper,onClick:()=>{p(!0),f(!0)},children:(0,r.jsx)(n.default,{src:a,alt:o,width:220,height:308})}),(0,r.jsx)("p",{className:d().cardName,children:u}),h&&(0,r.jsxs)("p",{className:d().series,children:["Series: ",h]})," ",_&&(0,r.jsxs)("p",{className:d().setName,children:["Set: ",_]})," ",(0,r.jsx)("p",{className:d().price,children:(0,r.jsxs)("a",{href:g,target:"_blank",rel:"noopener noreferrer",children:["Average Sell Price: $",null==m?void 0:m.toFixed(2)]})}),v&&(0,r.jsx)("div",{className:d().overlay,onClick:j,children:(0,r.jsxs)("div",{className:d().overlayContent,onClick:e=>e.stopPropagation(),children:[x&&(0,r.jsx)("div",{className:d().spinner,children:(0,r.jsx)(i.Z,{size:50,color:"#123ABC",loading:x})}),(0,r.jsx)(n.default,{src:s,alt:o,width:490,height:684,onLoad:()=>{f(!1)}}),(0,r.jsx)("button",{className:d().closeButton,onClick:j,children:(0,r.jsx)(l.G,{icon:c.NBC})})]})})]})}},6314:function(e,a,s){"use strict";s.r(a);var r=s(7437),t=s(2265),n=s(9376),l=s(3145),c=s(3078),i=s(9504),o=s(3315),d=s(5511),u=s.n(d);let h=()=>{let[e,a]=(0,t.useState)([]),[s,d]=(0,t.useState)(!0),[h,m]=(0,t.useState)(!1),[_,g]=(0,t.useState)(1),[v,p]=(0,t.useState)(!1),[x,f]=(0,t.useState)(""),[j,N]=(0,t.useState)(""),y=(0,t.useRef)(null),S=(0,n.useSearchParams)().get("query"),k=(0,n.useRouter)();(0,t.useEffect)(()=>{(async()=>{if(S){d(!0);try{let e=await (0,c.K)("cards",{q:"name:*".concat(S,"*"),orderBy:"-cardmarket.prices.averageSellPrice",pageSize:"20",page:_.toString()});1===_?a(e.data):a(a=>[...a,...e.data]),e.data.length<20?p(!0):p(!1)}catch(e){console.error("Error fetching cards:",e)}finally{d(!1),m(!1)}}})()},[S,_]);let C=(0,t.useCallback)(e=>{h||v||(y.current&&y.current.disconnect(),y.current=new IntersectionObserver(e=>{e[0].isIntersecting&&(m(!0),g(e=>e+1))}),e&&y.current.observe(e))},[h,v]),B=!x.trim()||x===j;return s&&1===_?(0,r.jsx)("div",{className:u().loadingSpinner,children:(0,r.jsx)(o.Z,{size:50,color:"#123ABC",loading:s})}):(0,r.jsxs)("div",{className:u().searchPage,children:[(0,r.jsx)("h1",{children:'Search Results for "'.concat(S,'"')}),(0,r.jsxs)("div",{className:u().searchContainer,children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by card name",value:x,onChange:e=>{f(e.target.value)},className:u().searchBar}),(0,r.jsx)("button",{onClick:()=>{x.trim()&&(a([]),g(1),p(!1),d(!0),N(x),k.push("/search?query=".concat(encodeURIComponent(x))))},className:u().searchButton,disabled:B,children:"Search"})]}),0===e.length&&!s&&(0,r.jsx)("div",{className:u().noResults,children:(0,r.jsx)(l.default,{src:"/no-result-found.png",alt:"No results found",width:400,height:300})}),(0,r.jsx)("div",{className:u().cardGrid,children:e.map((a,s)=>{var t,n,l,c,o,d;return e.length===s+1?(0,r.jsx)("div",{ref:C,children:(0,r.jsx)(i.Z,{imageSrc:a.images.small,largeImageSrc:a.images.large,altText:a.name,cardName:a.name,series:a.set.series,setName:a.set.name,averageSellPrice:null===(n=a.cardmarket)||void 0===n?void 0:null===(t=n.prices)||void 0===t?void 0:t.averageSellPrice,marketUrl:null===(l=a.cardmarket)||void 0===l?void 0:l.url})},a.id):(0,r.jsx)(i.Z,{imageSrc:a.images.small,largeImageSrc:a.images.large,altText:a.name,cardName:a.name,series:a.set.series,setName:a.set.name,averageSellPrice:null===(o=a.cardmarket)||void 0===o?void 0:null===(c=o.prices)||void 0===c?void 0:c.averageSellPrice,marketUrl:null===(d=a.cardmarket)||void 0===d?void 0:d.url},a.id)})}),h&&(0,r.jsx)("div",{className:u().loadingSpinner,children:(0,r.jsx)(o.Z,{size:50,color:"#123ABC",loading:h})})]})};a.default=()=>(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(h,{})})},3078:function(e,a,s){"use strict";s.d(a,{K:function(){return t}});let r=s(257).env.NEXT_PUBLIC_POKEMON_API_KEY,t=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=new URL("".concat("https://api.pokemontcg.io/v2","/").concat(e));Object.keys(a).forEach(e=>s.searchParams.append(e,a[e]));let t=await fetch(s.toString(),{headers:{"X-Api-Key":r||""}});if(!t.ok)throw Error("Error fetching data from ".concat(s,": ").concat(t.statusText));return t.json()}},7727:function(e){e.exports={card:"styles_card__WuWa9",imageWrapper:"styles_imageWrapper__57Hnf",cardName:"styles_cardName__I7_Bh",series:"styles_series__4Dkk4",price:"styles_price__MOkxO",overlay:"styles_overlay__q64vv",overlayContent:"styles_overlayContent__23CeX",closeButton:"styles_closeButton__8vE9m",setName:"styles_setName__rWQVt"}},5511:function(e){e.exports={searchPage:"styles_searchPage__zLQRa",cardGrid:"styles_cardGrid__l2qLK",loadingSpinner:"styles_loadingSpinner__I3rZz",searchContainer:"styles_searchContainer__yOnUk",searchBar:"styles_searchBar__G2K6A",searchButton:"styles_searchButton__m71So",noResults:"styles_noResults__Mr2px"}}},function(e){e.O(0,[837,676,878,274,971,117,744],function(){return e(e.s=3327)}),_N_E=e.O()}]);