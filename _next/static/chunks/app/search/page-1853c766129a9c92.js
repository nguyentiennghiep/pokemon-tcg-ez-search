(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{3327:function(e,s,a){Promise.resolve().then(a.bind(a,6314))},2635:function(e,s,a){"use strict";var r=a(7437),t=a(2265),n=a(3145),l=a(1268),c=a(5217),i=a(3315),o=a(7736),d=a.n(o);s.Z=e=>{let{imageSrc:s,largeImageSrc:a,altText:o,cardName:u,series:h,averageSellPrice:m,setName:_,marketUrl:g}=e,[v,p]=(0,t.useState)(!1),[x,y]=(0,t.useState)(!0),N=()=>{p(!1)};return(0,r.jsxs)("div",{className:d().card,children:[(0,r.jsx)("div",{className:d().imageWrapper,onClick:()=>{p(!0),y(!0)},children:(0,r.jsx)(n.default,{src:s,alt:o,width:220,height:308})}),(0,r.jsx)("p",{className:d().cardName,children:u}),h&&(0,r.jsxs)("p",{className:d().series,children:["Series: ",h]})," ",_&&(0,r.jsxs)("p",{className:d().setName,children:["Set: ",_]})," ",(0,r.jsx)("p",{className:d().price,children:(0,r.jsxs)("a",{href:g,target:"_blank",rel:"noopener noreferrer",children:["Average Sell Price: $",null==m?void 0:m.toFixed(2)]})}),v&&(0,r.jsx)("div",{className:d().overlay,onClick:N,children:(0,r.jsxs)("div",{className:d().overlayContent,onClick:e=>e.stopPropagation(),children:[x&&(0,r.jsx)("div",{className:d().spinner,children:(0,r.jsx)(i.Z,{size:50,color:"#123ABC",loading:x})}),(0,r.jsx)(n.default,{className:d().overlayImg,src:a,alt:o,width:490,height:684,onLoad:()=>{y(!1)}}),(0,r.jsx)("button",{className:d().closeButton,onClick:N,children:(0,r.jsx)(l.G,{icon:c.NBC})})]})})]})}},6314:function(e,s,a){"use strict";a.r(s);var r=a(7437),t=a(2265),n=a(9376),l=a(3145),c=a(1121),i=a(2635),o=a(3315),d=a(5511),u=a.n(d);let h=()=>{let[e,s]=(0,t.useState)([]),[a,d]=(0,t.useState)(!0),[h,m]=(0,t.useState)(!1),[_,g]=(0,t.useState)(1),[v,p]=(0,t.useState)(!1),[x,y]=(0,t.useState)(""),[N,j]=(0,t.useState)(""),S=(0,t.useRef)(null),f=(0,n.useSearchParams)().get("query"),k=(0,n.useRouter)();(0,t.useEffect)(()=>{(async()=>{if(f){d(!0);try{let e=await (0,c.K)("cards",{q:"name:*".concat(f,"*"),orderBy:"-cardmarket.prices.averageSellPrice",pageSize:"20",page:_.toString()});1===_?s(e.data):s(s=>[...s,...e.data]),e.data.length<20?p(!0):p(!1)}catch(e){console.error("Error fetching cards:",e)}finally{d(!1),m(!1)}}})()},[f,_]);let C=(0,t.useCallback)(e=>{h||v||(S.current&&S.current.disconnect(),S.current=new IntersectionObserver(e=>{e[0].isIntersecting&&(m(!0),g(e=>e+1))}),e&&S.current.observe(e))},[h,v]),P=!x.trim()||x===N;return a&&1===_?(0,r.jsx)("div",{className:u().loadingSpinner,children:(0,r.jsx)(o.Z,{size:50,color:"#123ABC",loading:a})}):(0,r.jsxs)("div",{className:u().searchPage,children:[(0,r.jsx)("h1",{children:'Search Results for "'.concat(f,'"')}),(0,r.jsxs)("div",{className:u().searchContainer,children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by card name",value:x,onChange:e=>{y(e.target.value)},className:u().searchBar}),(0,r.jsx)("button",{onClick:()=>{x.trim()&&(s([]),g(1),p(!1),d(!0),j(x),k.push("/search?query=".concat(encodeURIComponent(x))))},className:u().searchButton,disabled:P,children:"Search"})]}),0===e.length&&!a&&(0,r.jsx)("div",{className:u().noResults,children:(0,r.jsx)(l.default,{src:"/no-result-found.png",alt:"No results found",width:400,height:300})}),(0,r.jsx)("div",{className:u().cardGrid,children:e.map((s,a)=>{var t,n,l,c,o,d;return e.length===a+1?(0,r.jsx)("div",{ref:C,children:(0,r.jsx)(i.Z,{imageSrc:s.images.small,largeImageSrc:s.images.large,altText:s.name,cardName:s.name,series:s.set.series,setName:s.set.name,averageSellPrice:null===(n=s.cardmarket)||void 0===n?void 0:null===(t=n.prices)||void 0===t?void 0:t.averageSellPrice,marketUrl:null===(l=s.cardmarket)||void 0===l?void 0:l.url})},s.id):(0,r.jsx)(i.Z,{imageSrc:s.images.small,largeImageSrc:s.images.large,altText:s.name,cardName:s.name,series:s.set.series,setName:s.set.name,averageSellPrice:null===(o=s.cardmarket)||void 0===o?void 0:null===(c=o.prices)||void 0===c?void 0:c.averageSellPrice,marketUrl:null===(d=s.cardmarket)||void 0===d?void 0:d.url},s.id)})}),h&&(0,r.jsx)("div",{className:u().loadingSpinner,children:(0,r.jsx)(o.Z,{size:50,color:"#123ABC",loading:h})})]})};s.default=()=>(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(h,{})})},1121:function(e,s,a){"use strict";a.d(s,{K:function(){return t}});let r=a(257).env.NEXT_PUBLIC_POKEMON_API_KEY,t=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL("".concat("https://api.pokemontcg.io/v2","/").concat(e));Object.keys(s).forEach(e=>a.searchParams.append(e,s[e]));let t=await fetch(a.toString(),{headers:{"X-Api-Key":r||""}});if(!t.ok)throw Error("Error fetching data from ".concat(a,": ").concat(t.statusText));return t.json()}},7736:function(e){e.exports={card:"styles_card__P8OIq",imageWrapper:"styles_imageWrapper__nWgO9",cardName:"styles_cardName__AOK6D",series:"styles_series__SI2jg",price:"styles_price___kYfN",overlay:"styles_overlay__0JUcV",overlayContent:"styles_overlayContent__OnbCG",overlayImg:"styles_overlayImg__Wkcs3",closeButton:"styles_closeButton__4_Szk",setName:"styles_setName__Hv_E0"}},5511:function(e){e.exports={searchPage:"styles_searchPage__zLQRa",cardGrid:"styles_cardGrid__l2qLK",loadingSpinner:"styles_loadingSpinner__I3rZz",searchContainer:"styles_searchContainer__yOnUk",searchBar:"styles_searchBar__G2K6A",searchButton:"styles_searchButton__m71So",noResults:"styles_noResults__Mr2px"}}},function(e){e.O(0,[937,676,878,274,971,117,744],function(){return e(e.s=3327)}),_N_E=e.O()}]);