(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[911],{581:function(e,a,r){Promise.resolve().then(r.bind(r,7479))},9504:function(e,a,r){"use strict";var s=r(7437),t=r(2265),l=r(3145),n=r(1268),i=r(5217),c=r(3315),o=r(7727),d=r.n(o);a.Z=e=>{let{imageSrc:a,largeImageSrc:r,altText:o,cardName:h,series:u,averageSellPrice:m,setName:_,marketUrl:g}=e,[x,p]=(0,t.useState)(!1),[j,v]=(0,t.useState)(!0),y=()=>{p(!1)};return(0,s.jsxs)("div",{className:d().card,children:[(0,s.jsx)("div",{className:d().imageWrapper,onClick:()=>{p(!0),v(!0)},children:(0,s.jsx)(l.default,{src:a,alt:o,width:220,height:308})}),(0,s.jsx)("p",{className:d().cardName,children:h}),u&&(0,s.jsxs)("p",{className:d().series,children:["Series: ",u]})," ",_&&(0,s.jsxs)("p",{className:d().setName,children:["Set: ",_]})," ",(0,s.jsx)("p",{className:d().price,children:(0,s.jsxs)("a",{href:g,target:"_blank",rel:"noopener noreferrer",children:["Average Sell Price: $",null==m?void 0:m.toFixed(2)]})}),x&&(0,s.jsx)("div",{className:d().overlay,onClick:y,children:(0,s.jsxs)("div",{className:d().overlayContent,onClick:e=>e.stopPropagation(),children:[j&&(0,s.jsx)("div",{className:d().spinner,children:(0,s.jsx)(c.Z,{size:50,color:"#123ABC",loading:j})}),(0,s.jsx)(l.default,{className:d().overlayImg,src:r,alt:o,width:490,height:684,onLoad:()=>{v(!1)}}),(0,s.jsx)("button",{className:d().closeButton,onClick:y,children:(0,s.jsx)(n.G,{icon:i.NBC})})]})})]})}},7479:function(e,a,r){"use strict";var s=r(7437),t=r(9376),l=r(2265),n=r(3145),i=r(3543),c=r.n(i),o=r(9504),d=r(1121),h=r(3315);let u=async()=>{try{let e=await fetch("https://api.pokemontcg.io/v2/rarities");return(await e.json()).data}catch(e){return console.error("Error fetching rarities:",e),[]}},m=async(e,a,r,s)=>{try{let t="set.id:".concat(e);return r&&(t+=" rarity:".concat(r)),s&&(t+=" name:".concat(s,"*")),(await (0,d.K)("cards",{q:t,orderBy:"-number",pageSize:"20",page:a.toString()})).data}catch(e){return console.error("Error fetching cards:",e),[]}};a.default=e=>{let{initialSet:a}=e,r=(0,t.useParams)(),i=(0,t.useRouter)(),{setid:_}=r,[g,x]=(0,l.useState)(a),[p,j]=(0,l.useState)([]),[v,y]=(0,l.useState)([]),[f,N]=(0,l.useState)(""),[S,C]=(0,l.useState)(""),[k,w]=(0,l.useState)(!a),[E,P]=(0,l.useState)(!1),[b,B]=(0,l.useState)(1),[I,O]=(0,l.useState)(!1),T=(0,l.useRef)(null);(0,l.useEffect)(()=>{(async()=>{if(_&&!a)try{let e=await (0,d.K)("sets/".concat(_)),a=await e.json();a?x(a):i.push("/404")}catch(e){console.error("Error fetching set:",e),i.push("/404")}finally{w(!1)}y(await u())})()},[_,a,i]),(0,l.useEffect)(()=>{_&&!I&&(async()=>{P(!0);let e=await m(_,b,f,S);j(a=>1===b?e:[...a,...e]),P(!1),e.length<20&&O(!0)})()},[_,b,f,S,I]);let A=(0,l.useCallback)(e=>{E||I||(T.current&&T.current.disconnect(),T.current=new IntersectionObserver(e=>{e[0].isIntersecting&&B(e=>e+1)}),e&&T.current.observe(e))},[E,I]);return k?(0,s.jsx)("div",{className:c().loadingSpinner,children:(0,s.jsx)(h.Z,{size:50,color:"#123ABC",loading:k})}):g?(0,s.jsxs)("div",{className:c().setPage,children:[(0,s.jsxs)("div",{className:c().setHeader,children:[(0,s.jsx)("h1",{children:g.name}),(0,s.jsx)(n.default,{src:g.images.logo,alt:"".concat(g.name," logo"),width:256,height:92})]}),(0,s.jsxs)("div",{className:c().setDetails,children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Series:"})," ",g.series]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Release Date:"})," ",g.releaseDate]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Total Cards:"})," ",g.total]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Printed Total:"})," ",g.printedTotal]})]}),(0,s.jsx)("h2",{children:"Cards"}),(0,s.jsxs)("div",{className:c().filterSearchContainer,children:[(0,s.jsxs)("div",{className:c().filterContainer,children:[(0,s.jsx)("label",{htmlFor:"rarityFilter",children:"Filter by Rarity:"}),(0,s.jsxs)("select",{id:"rarityFilter",value:f,onChange:e=>{N(e.target.value),j([]),B(1),O(!1)},children:[(0,s.jsx)("option",{value:"",children:"All"}),v.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:c().searchContainer,children:[(0,s.jsx)("label",{htmlFor:"cardNameSearch",children:"Search by Card Name:"}),(0,s.jsx)("input",{type:"text",id:"cardNameSearch",value:S,onChange:e=>{C(e.target.value),j([]),B(1),O(!1)},placeholder:"Enter card name"})]})]}),(0,s.jsx)("div",{className:c().cardsGrid,children:p.map((e,a)=>p.length===a+1?(0,s.jsx)("div",{ref:A,children:(0,s.jsx)(o.Z,{imageSrc:e.images.small,largeImageSrc:e.images.large,altText:e.name,cardName:e.name,averageSellPrice:e.cardmarket.prices.averageSellPrice,marketUrl:e.cardmarket.url})},e.id):(0,s.jsx)(o.Z,{imageSrc:e.images.small,largeImageSrc:e.images.large,altText:e.name,cardName:e.name,averageSellPrice:e.cardmarket.prices.averageSellPrice,marketUrl:e.cardmarket.url},e.id))}),E&&(0,s.jsx)("div",{className:c().loadingSpinner,children:(0,s.jsx)(h.Z,{size:50,color:"#123ABC",loading:E})})]}):null}},1121:function(e,a,r){"use strict";r.d(a,{K:function(){return t}});let s=r(257).env.NEXT_PUBLIC_POKEMON_API_KEY,t=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URL("".concat("https://api.pokemontcg.io/v2","/").concat(e));Object.keys(a).forEach(e=>r.searchParams.append(e,a[e]));let t=await fetch(r.toString(),{headers:{"X-Api-Key":s||""}});if(!t.ok)throw Error("Error fetching data from ".concat(r,": ").concat(t.statusText));return t.json()}},7727:function(e){e.exports={card:"styles_card__WuWa9",imageWrapper:"styles_imageWrapper__57Hnf",cardName:"styles_cardName__I7_Bh",series:"styles_series__4Dkk4",price:"styles_price__MOkxO",overlay:"styles_overlay__q64vv",overlayContent:"styles_overlayContent__23CeX",overlayImg:"styles_overlayImg__Cx7dw",closeButton:"styles_closeButton__8vE9m",setName:"styles_setName__rWQVt"}},3543:function(e){e.exports={setPage:"styles_setPage__eRBIu",setHeader:"styles_setHeader__j8BFq",setDetails:"styles_setDetails__qJ5H6",filterSearchContainer:"styles_filterSearchContainer__SGk9V",filterContainer:"styles_filterContainer__dvwvM",searchContainer:"styles_searchContainer__lJpuH",cardsGrid:"styles_cardsGrid__dT2Wx",card:"styles_card__guZLl",loadingSpinner:"styles_loadingSpinner__f85CI"}}},function(e){e.O(0,[986,837,676,878,274,971,117,744],function(){return e(e.s=581)}),_N_E=e.O()}]);